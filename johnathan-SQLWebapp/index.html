<!DOCTYPE html>
<html lang="en">	
	<head>
		<title>SQL Snippets</title>
		<meta charset="utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<link rel="stylesheet" href="styles/bootstrap.min.css" />
		<link rel="stylesheet" href="styles/fa/css/font-awesome.min.css" />
		<link rel="stylesheet" href="styles/codemirror.css" />
		<link rel="stylesheet" href="styles/base16-light.css" />
		<link rel="stylesheet" href="styles/custom.css" />
		<script src="scripts/jquery.min.js"></script>
		<script src="scripts/knockout-3.4.2.js"></script>
		<script src="scripts/codemirror.js"></script>
		<script src="scripts/ko.codemirror.js"></script>
		<script src="scripts/sql.js"></script>
		<script src="scripts/script.js"></script>
		<script src="scripts/mustache.js"></script>
		<script src="scripts/FileSaver.js"></script>
		<script src="scripts/main.js"></script>
		<script type="text/javascript">
        $(
			function () 
			{
				ko.applyBindings(new MainViewModel());
			}
		);
    </script>
	</head>
    <body data-spy="scroll" data-target=".navbar" data-offset="10">
		<div class='container-fluid'>
			<!--Sidebar-->
			<div class='col-md-2'>
				<div id="side-bar" class='row fill'>
				</div>
			</div>
			<!--Main Content-->
			<div class='col-md-10'>
				<div class="row">	
						<div class='row align-items-center m-3'>
							<div class='col-md-2'>
								<h1 class='no-margin'>Snippets</h1>
							</div>
							<div class='col-md-1'>
								<button id="add-snippet" class='btn btn-default btn-circle' type="button" data-bind="click: addSnippet">
									<i class='glyphicon glyphicon-plus'></i>
								</button>
							</div>
							<div class='col-md-10'></div>
						</div>
						
						<div class='row'>
							<form>
								<div id="snippets-container" class='container-fluid form-group row' data-bind="foreach: {data:snippets}">
									<div data-bind="attr: {'id': id}" class="snippet container-fluid form-group row align-items-center" >
										
										<!--NEW SNIPPET FORM-->
										<div class='form-group row align-items-center'>
											<label class='col-form-label col-md-2'>Title</label>
											<div class='col-md-4'>
												<input class='form-control' data-bind="textInput: title" />
											</div>
											<div class='form-control-plaintext col-md-6'>
												<button id="add-snippet" class='btn btn-default btn-circle mt-0' type="button" data-bind="click: function(){$root.removeSnippet($data);}">
													<i class='glyphicon glyphicon-remove'></i>
												</button>
											</div>
										</div>
										
										<div class='form-group row align-items-center'>
											<label class='col-form-label col-md-2'>Description</label>
											<div class='col-md-4'>
												<input class='form-control' data-bind="textInput: description" />
											</div>
										</div>
										
										<div class='form-group row'>
											<label class='col-form-label col-md-2'>Types</label>
											<div class='col-md-2'>
												<select class='form-control' data-bind="options: $root.snippetTypes, optionsText: 'name', selectedOptions: snippetTypes" multiple="true"></select>
											</div>
										</div>
										
										<div class='form-group row'>
											<label class='col-form-label col-md-2'>Snippet Text:</label>
											<div class='col-md-10'>
												<div class="codeeditor" data-bind="codemirror: { binding: snippetCode, codeMirrorOptions: { mode: 'text/x-mssql', theme: 'base16-light', smartIndent: true, tabSize: 4, language: 'sql', lineNumbers: true }}" ></div>
												<!--<div class="codeeditor" data-bind="codemirror: { testProperty: 1, testPropert2: 2}" ></div>-->
											</div>
										</div>
										
									</div>
								</div>
							</form>
						</div>
						
						<!--
						<div id="v-model">
							<div>ViewModel:</div>
							<pre data-bind="text: ko.toJSON($root, null, 2)"></pre>
						</div>
	
						<div id="output">
							<div>Output:</div>
							<pre data-bind="text: output"></pre>
						</div>

						-->
						
						<div>
							<button id="save-snippet" type="button" data-bind="click: saveSnippets">Save Snippet(s)</button>
						</div>
	
				</div>
				<div class="push"></div>
			</div>
		</div>
		<div id="footer"></div>
		<script src="scripts/bootstrap.min.js"></script>

		<pre id="outputTemplate" style="display:none">
<?xml version="1.0" encoding="utf-8" ?>
<CodeSnippets  xmlns="http://schemas.microsoft.com/VisualStudio/2005/CodeSnippet">
	{{#snippets}}
	<CodeSnippet Format="1.0.0">
		<Header>
			<Title>{{title}}</Title>
			<Shortcut></Shortcut>
			<Description>{{description}}</Description>
			<Author></Author>
			<SnippetTypes>
				{{#snippetTypes}}
				<SnippetType>{{value}}</SnippetType>
				{{/snippetTypes}}
			</SnippetTypes>
		</Header>
		<Snippet>
			<Declarations></Declarations>
			<Code Language="SQL"><![CDATA[{{snippetCode}}]]>
			</Code>
		</Snippet>
	</CodeSnippet>
	{{/snippets}}
</CodeSnippets>
		</pre>
    </body>
</html>